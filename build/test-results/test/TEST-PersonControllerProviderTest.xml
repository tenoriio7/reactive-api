<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="PersonControllerProviderTest" tests="1" skipped="0" failures="1" errors="0" timestamp="2024-05-31T01:55:16" hostname="MacBook-Air-de-tenorio.local" time="0.813">
  <properties/>
  <testcase name="reactive_api - Retrieve person" classname="PersonControllerProviderTest" time="0.813">
    <failure message="java.lang.AssertionError: reactive_api - Upon Retrieve person &#10;Failures:&#10;&#10;1) Verifying a pact between reactive_api and reactive_api - Retrieve person: has status code 201&#10;&#10;    1.1) status: expected status of 201 but was 400&#10;&#10;    1.2) body: $ Actual map is missing the following keys: age, id, name&#10;&#10;        {&#10;        -  &quot;age&quot;: 32,&#10;        -  &quot;id&quot;: 1,&#10;        -  &quot;name&quot;: &quot;vini&quot;&#10;        +  &quot;error&quot;: &quot;Bad Request&quot;,&#10;        +  &quot;path&quot;: &quot;/person&quot;,&#10;        +  &quot;status&quot;: 400,&#10;        +  &quot;timestamp&quot;: 1717120517015&#10;        }&#10;&#10;&#10;" type="java.lang.AssertionError">java.lang.AssertionError: reactive_api - Upon Retrieve person 
Failures:

1) Verifying a pact between reactive_api and reactive_api - Retrieve person: has status code 201

    1.1) status: expected status of 201 but was 400

    1.2) body: $ Actual map is missing the following keys: age, id, name

        {
        -  &quot;age&quot;: 32,
        -  &quot;id&quot;: 1,
        -  &quot;name&quot;: &quot;vini&quot;
        +  &quot;error&quot;: &quot;Bad Request&quot;,
        +  &quot;path&quot;: &quot;/person&quot;,
        +  &quot;status&quot;: 400,
        +  &quot;timestamp&quot;: 1717120517015
        }



	at au.com.dius.pact.provider.junit5.PactVerificationContext.verifyInteraction(PactVerificationContext.kt:72)
	at PersonControllerProviderTest.pactVerificationTestTemplate(PersonControllerProviderTest.kt:32)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
</failure>
  </testcase>
  <system-out><![CDATA[
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.2)

2024-05-30T22:55:11.959-03:00  INFO 1968 --- [    Test worker] w.o.g.p.i.worker.GradleWorkerMain        : Starting GradleWorkerMain using Java 17.0.11 with PID 1968 (started by tenorio in /Users/tenorio/dev/reactive-api)
2024-05-30T22:55:11.962-03:00  INFO 1968 --- [    Test worker] w.o.g.p.i.worker.GradleWorkerMain        : No active profile set, falling back to 1 default profile: "default"
2024-05-30T22:55:13.386-03:00  INFO 1968 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-30T22:55:13.388-03:00  INFO 1968 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-05-30T22:55:13.506-03:00  INFO 1968 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 114 ms. Found 2 R2DBC repository interfaces.
2024-05-30T22:55:14.152-03:00  INFO 1968 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-30T22:55:14.164-03:00  INFO 1968 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-30T22:55:14.164-03:00  INFO 1968 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.18]
2024-05-30T22:55:14.238-03:00  INFO 1968 --- [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-30T22:55:14.238-03:00  INFO 1968 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2046 ms
2024-05-30T22:55:15.896-03:00  INFO 1968 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoint(s) beneath base path '/actuator'
2024-05-30T22:55:15.982-03:00  INFO 1968 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-30T22:55:16.017-03:00  INFO 1968 --- [    Test worker] o.a.k.clients.consumer.ConsumerConfig    : ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-reactive-api-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = reactive-api
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-05-30T22:55:16.103-03:00  INFO 1968 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.6.1
2024-05-30T22:55:16.103-03:00  INFO 1968 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 5e3c2b738d253ff5
2024-05-30T22:55:16.104-03:00  INFO 1968 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1717120516102
2024-05-30T22:55:16.112-03:00  INFO 1968 --- [    Test worker] fkaConsumerFactory$ExtendedKafkaConsumer : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Subscribed to topic(s): person-async
2024-05-30T22:55:16.133-03:00  INFO 1968 --- [    Test worker] w.o.g.p.i.worker.GradleWorkerMain        : Started GradleWorkerMain in 4.571 seconds (process running for 5.476)
2024-05-30T22:55:16.357-03:00  INFO 1968 --- [    Test worker] p.j.PactVerificationStateChangeExtension : Invoking state change method 'threre create person':SETUP

Verifying a pact between reactive_api
  [Using File target/pacts/reactive_api-createPerson.json]
  Given threre create person
  Retrieve person
2024-05-30T22:55:16.475-03:00  WARN 1968 --- [       Thread-7] au.com.dius.pact.core.support.Metrics    : 
            Please note: we are tracking events anonymously to gather important usage statistics like JVM version
            and operating system. To disable tracking, set the 'pact_do_not_track' system property or environment
            variable to 'true'.
            
2024-05-30T22:55:16.719-03:00  INFO 1968 --- [ntainer#0-0-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Cluster ID: DbjZsRnwTEmIWtx9U7lRtQ
2024-05-30T22:55:16.744-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Discovered group coordinator localhost:9092 (id: 2147482646 rack: null)
2024-05-30T22:55:16.746-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] (Re-)joining group
2024-05-30T22:55:16.868-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Request joining group due to: need to re-join with the given member-id: consumer-reactive-api-1-e1793485-ece8-4ee8-b43c-8f4dd10a58fb
2024-05-30T22:55:16.870-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-05-30T22:55:16.871-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] (Re-)joining group
2024-05-30T22:55:16.922-03:00  INFO 1968 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-30T22:55:16.923-03:00  INFO 1968 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-30T22:55:16.924-03:00  INFO 1968 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-30T22:55:16.997-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Successfully joined group with generation Generation{generationId=3, memberId='consumer-reactive-api-1-e1793485-ece8-4ee8-b43c-8f4dd10a58fb', protocol='range'}
2024-05-30T22:55:17.001-03:00  WARN 1968 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public reactor.core.publisher.Mono<br.com.tenorio.reactiveapi.models.Person> br.com.tenorio.reactiveapi.controller.PersonController.create(br.com.tenorio.reactiveapi.models.Person)]
2024-05-30T22:55:17.004-03:00  INFO 1968 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-reactive-api-1, groupId=reactive-api] Finished assignment for group at generation 3: {consumer-reactive-api-1-e1793485-ece8-4ee8-b43c-8f4dd10a58fb=Assignment(partitions=[person-async-0])}
    returns a response which
      has status code 201 (FAILED)
      has a matching body (FAILED)

Failures:

1) Verifying a pact between reactive_api and reactive_api - Retrieve person: has status code 201

    1.1) status: expected status of 201 but was 400

    1.2) body: $ Actual map is missing the following keys: age, id, name

        {
        -  "age": 32,
        -  "id": 1,
        -  "name": "vini"
        +  "error": "Bad Request",
        +  "path": "/person",
        +  "status": 400,
        +  "timestamp": 1717120517015
        }



2024-05-30T22:55:17.141-03:00  WARN 1968 --- [    Test worker] a.c.d.p.p.DefaultTestResultAccumulator   : Skipping publishing of verification results as it has been disabled (pact.verifier.publishResults is not 'true')
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
